## Оглавление
+ [Описание проекта](#описание-проекта)
    + [Технологический стек](#технологический-стек)
    + [Функционал приложения](#функционал-приложения)
+ [Быстрый старт](#быстрый-старт)
    + [Предварительные требования для запуска](#предварительные-требования-для-запуска)
    + [Установка и запуск](#установка-и-запуск)
    + [API документация](#api-документация)
+ [Описание инфраструктуры](#описание-инфраструктуры)
    + [Структура проекта](#структура-проекта)
    + [Что можно улучшить](#что-можно-улучшить)
      
## Описание проекта
Асинхронное backend-приложение на FastAPI с парсером тендеров.
Приложение собирает информацию о тендерах с сайта [b2b-center.ru/market/](https://www.b2b-center.ru/market/), сохраняет данные в базу данных и предоставляет API-эндпоинт для получения этих данных.


### Технологический стек

- FastAPI – основной фреймворк;
- Uvicorn - ASGI-сервер для запуска FastAPI приложения;
- SQLAlchemy (async) – ORM;
- SQLite - СУБД;
- requests + BeautifulSoup - для парсинга сайта;
- Pydantic – валидация входных/выходных данных;


### Функционал приложения

**Парсер**
- Использует `requests` для HTTP-запросов.
- С помощью `BeautifulSoup` извлекает:
    - ID тендера
    - Организатора
    - Ссылку
    - Описание
    - Дату окончания
- Результаты сохраняются во временный список `TENDERS_LIST`.

**Сохранение в БД**
- Используется `SQLAlchemy` с асинхронной сессией `AsyncSession`.
- Создана модель `Tenders`, куда добавляются данные из парсера.
- Функция `save_to_db` вызывает зависимость `db_helper.session_dependency` и сохраняет объекты.

**FastAPI-приложение**
- Один эндпоинт `GET /tenders`, который:
    - Запрашивает все тендеры из базы `(session.execute(select(...)))`
    - Возвращает их пользователю.
- Данные сериализуются с помощью `Pydantic` (есть модель-ответ `TendersRead`).

## Быстрый старт

### Предварительные требования для запуска
- **ОС**: Unix-подобная система (Linux/Ubuntu/macOS)
- **Git** (система контроля версий)


### Установка и запуск
1. Склонируйте репозиторий:
   
   ```
   https://github.com/kadikoff/b2b-center-parser.git
2. Установите необходимые библиотеки
   ```
   pip install -r requirements.txt
3. Запустите FastAPI-приложение, тем самым инициализируя базу данных
   ```
   python -m src.run_app
4. Запустите парсер и укажите необходимое количество записей для парсинга
   ```
   python main.py --max 100
5. Перейдите в браузер по ссылке и получите список загруженных тендеров
   ```
   http://localhost:8000/tenders
   ```

### API документация
- Swagger UI
  ```
  http://localhost:8000/docs
  ```
- ReDoc
  ```
  http://localhost:8000/redoc
  ```
  
## Описание инфраструктуры
### Структура проекта

Приложение построено по принципам `REST` и архитектурному шаблону `MVC`. Все модули разделены на независимые компоненты, обеспечивая читаемость, масштабируемость и тестируемость кода.

```
b2b-center-parser/  
├── src/                          # src - основной backend-модуль  
│   ├── api/                      # API endpoints  
│   │   ├── crud/                 # CRUD функции  
│   │   └── routes/               # Маршруты FastAPI  
│   ├── core/                     # Ядро приложения  
│   │   ├── models/               # Модели базы данных  
│   │   ├── schemas/              # Pydantic схемы
│   │   └── config.py             # Конфигурационный файл проекта
│   ├── utils/                    # Вспомогательные утилиты (логика парсера)  
│   ├── run_app.py                # Точка входа в FastAPI-приложение
├── .gitignore                    # Игнорируемые файлы Git  
├── README.md                     # Описание проекта
├── main.py                       # Точка входа в парсер
└── requirements.txt              # Зависимости
```

### Что можно улучшить
**Добавить Docker**
- Сделать Dockerfile и docker-compose.yml, чтобы любой мог поднять проект одной командой.

**Планировщик**
- Запускать парсинг по расписанию (раз в день), например, через APScheduler, Taskiq или cron.

**Логирование**
- Вместо print() использовать logging, особенно для парсинга и ошибок БД.

**Покрытие тестами**
- Unit-тесты для парсера и API (например, с pytest).

**Обработка ошибок парсинга**
- Добавить try/except, логировать ошибки.

**Миграции Alembic**
- Для удобства масштабирования приложения

**Больше эндпоинтов**
- Например: фильтр по дате окончания, поиск по организатору и т.д.




